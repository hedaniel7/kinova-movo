<?xml version="1.0"?>
<!-- j2s7s300 refers to jaco v2 7DOF spherical 3fingers -->
<robot name="j2s7s300_arm" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <xacro:macro name="jaco_robot_7dof" params="prefix parent *origin">
        
        <joint name="${prefix}kinova_joint" type="fixed">
            <parent link="${parent}" />
            <child link = "${prefix}link_base" />
            <xacro:insert_block name="origin"/>
        </joint>

  <link name="${prefix}link_base">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/base.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.05"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.08"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.11"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.14"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.17"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.46784"/>
      <origin rpy="0 0 0" xyz="0 0 0.1255"/>
      <inertia ixx="0.000951270861568" ixy="0" ixz="0" iyy="0.000951270861568" iyz="0" izz="0.000374272"/>
    </inertial>
  </link>
  <link name="${prefix}link_1">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/shoulder.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_big.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 -0.025 -0.14"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.025 -0.025 -0.12"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.025 -0.025 -0.12"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.12"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.02 -0.02 -0.05"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 -0.025 -0.05"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.02 -0.02 -0.05"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.7477"/>
      <origin xyz="0 -0.002 -0.0605"/>
      <inertia ixx="0.00152031725204" ixy="0" ixz="0" iyy="0.00152031725204" iyz="0" izz="0.00059816"/>
    </inertial>
  </link>
  <joint name="${prefix}shoulder_pan_joint" type="continuous">
    <parent link="${prefix}link_base"/>
    <child link="${prefix}link_1"/>
    <axis xyz="0 0 1"/>
    <!-- The upper and lower limits below are set based on the range of +/-
         10000 degrees listed in the "JACO2 Spherical 7 DOF Advanced
         specification guide" from Kinova.  The velocity limit is set from
         "Recommended maximum actuators utilization" in the same document. -->
    <limit effort="2000" lower="-174.532925" upper="174.532925" velocity="0.63"/>
    <origin rpy="0 3.14159265359 0" xyz="0 0 0.15675"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_1_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}shoulder_pan_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_1_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_2">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/arm_half_1.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_big.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.025 -0.00 -0.025"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.025 -0.00 -0.025"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.02 -0.09 -0.02"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.02 -0.09 -0.02"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 -0.11 -0.015"/>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.015 -0.11 -0.015"/>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.13 -0.01"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.15 -0.005"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.17 -0"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.2 -0"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8447"/>
      <origin xyz="0 -0.103563213 0"/>
      <inertia ixx="0.00247073761701" ixy="0" ixz="0" iyy="0.000380115" iyz="0" izz="0.00247073761701"/>
    </inertial>
  </link>
  <joint name="${prefix}shoulder_lift_joint" type="revolute">
    <parent link="${prefix}link_1"/>
    <child link="${prefix}link_2"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="${0.523598775598 - M_PI}" upper="${5.75958653158 - M_PI}" velocity="0.63"/>
    <origin rpy="1.57079632679 0 0" xyz="0 0.0016 -0.11875"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_2_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}shoulder_lift_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_2_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_3">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/arm_half_2.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_big.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.0 0.028 -0.232"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.03 0.03 -0.20"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.03 0.03 -0.20"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.025 0.025 -0.13"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.025 0.025 -0.13"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.02 0.02 -0.11"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.02 0.02 -0.11"/>
      <geometry>
        <sphere radius="0.02"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.01 0.01 -0.08"/>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.01 0.01 -0.08"/>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.02"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.05"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8447"/>
      <origin xyz="0 0 -0.1022447445"/>
      <inertia ixx="0.00247073761701" ixy="0" ixz="0" iyy="0.00247073761701" iyz="0" izz="0.000380115"/>
    </inertial>
  </link>
  <joint name="${prefix}arm_half_joint" type="continuous">
    <parent link="${prefix}link_2"/>
    <child link="${prefix}link_3"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="-174.532925" upper="174.532925" velocity="0.63"/>
    <origin rpy="-1.57079632679 0 0" xyz="0 -0.205 0"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_3_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}arm_half_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_3_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_4">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/forearm.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_small.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.0"/>
      <geometry>
        <sphere radius="0.045"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.03 0.0 -0.03"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.03 0.0 -0.03"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 0.09 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.015 0.09 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 0.11 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.015 0.11 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0.015 0.13 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="-0.015 0.13 -0.02"/>
      <geometry>
        <sphere radius="0.015"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.15 -0.0125"/>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.18 -0.0125"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.21 -0.0125"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.6763"/>
      <origin xyz="0 0.081 -0.0086"/>
      <inertia ixx="0.00142022431908" ixy="0" ixz="0" iyy="0.000304335" iyz="0" izz="0.00142022431908"/>
    </inertial>
  </link>
  <joint name="${prefix}elbow_joint" type="revolute">
    <parent link="${prefix}link_3"/>
    <child link="${prefix}link_4"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="${0.523598775598 - M_PI}" upper="${5.75958653158 - M_PI}" velocity="0.63"/>
    <origin rpy="-1.57079632679 0 0" xyz="0 0 -0.205"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_4_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}elbow_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_4_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_5">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/wrist_spherical_1.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_small.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.00"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.025"/>
      <geometry>
        <sphere radius="0.0325"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.105"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.463"/>
      <origin xyz="0 0.0028848942 -0.0541932613"/>
      <inertia ixx="0.0004321316048" ixy="0" ixz="0" iyy="0.0004321316048" iyz="0" izz="9.26e-05"/>
    </inertial>
  </link>
  <joint name="${prefix}wrist_spherical_1_joint" type="continuous">
    <parent link="${prefix}link_4"/>
    <child link="${prefix}link_5"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="-174.532925" upper="174.532925" velocity="0.85"/>
    <origin rpy="-1.57079632679 0 3.14159265359" xyz="0 0.2073 -0.0114"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_5_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}wrist_spherical_1_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_5_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_6">
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/wrist_spherical_2.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.1788232 0.1788232 0.1788232 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <mesh filename="package://drake_models/jaco_description/meshes/ring_small.obj"/>
      </geometry>
      <material name="black">
        <color rgba="0.627451 0.627451 0.627451 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.0 -0.02"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.085 -0.0"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.463"/>
      <origin xyz="0 0.0497208855 -0.0028562765"/>
      <inertia ixx="0.0004321316048" ixy="0" ixz="0" iyy="9.26e-05" iyz="0" izz="0.0004321316048"/>
    </inertial>
  </link>
  <joint name="${prefix}wrist_spherical_2_joint" type="revolute">
    <parent link="${prefix}link_5"/>
    <child link="${prefix}link_6"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="${0.523598775598 - M_PI}" upper="${5.75958653158 - M_PI}" velocity="0.85"/>
    <origin rpy="-1.57079632679 0 0" xyz="0 0 -0.10375"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_6_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}wrist_spherical_2_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_6_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>
  <link name="${prefix}link_7">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.00375"/>
      <geometry>
        <sphere radius="0.035"/>
      </geometry>
    </collision>
    <inertial>
      <!-- TODO(sammy-tri) This inertial is bogus with the hand removed. -->
      <mass value="0.001"/>
      <origin xyz="0 0 -0.06"/>
      <inertia ixx="0.000001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>
    </inertial>
  </link>
  <joint name="${prefix}wrist_3_joint" type="continuous">
    <parent link="${prefix}link_6"/>
    <child link="${prefix}link_7"/>
    <axis xyz="0 0 1"/>
    <limit effort="2000" lower="-174.532925" upper="174.532925" velocity="0.85"/>
    <origin rpy="-1.57079632679 0 3.14159265359" xyz="0 0.10375 0"/>
    <dynamics damping="0.01" friction="0.0"/>
  </joint>
  <transmission name="${prefix}joint_7_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="${prefix}wrist_3_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="${prefix}joint_7_actuator">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </actuator>
  </transmission>

    <joint name="${prefix}ee_fixed_joint" type="fixed">
        <parent link="${prefix}link_7" />
        <child link="${prefix}ee_link" />
        <origin xyz="0 0 -0.1600" rpy="${M_PI} ${M_PI/2} 0"/>
    </joint>

    <link name="${prefix}ee_link"/>  

  </xacro:macro>
</robot>
